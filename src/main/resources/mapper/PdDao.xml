<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.trkj.crmproject.dao.PdDao">


<!--    盘点单  查询全部（根据ckId中间表外键查询ckName-->
    <select id="selectPdckNameAll" resultType="com.trkj.crmproject.vo.PdVo">
         select pd.pd_id,pd.pd_time,pd.bz,ck.ck_name,users.user_name from pd
            left join ck on ck.ck_id=pd.ck_id
			left join staff on staff.staff_id=pd.staff_id
			left join users on staff.user_id=users.user_id
			group by pd.pd_id
    </select>

<!--    盘点单  查询全部（根据仓库名称查询）-->
    <select id="selectPdckName" resultType="com.trkj.crmproject.vo.PdVo">
        select pd.pd_id,pd.pd_time,pd.bz,ck.ck_name,users.user_name from pd
            left join ck on ck.ck_id=pd.ck_id
			left join staff on staff.staff_id=pd.staff_id
			left join users on staff.user_id=users.user_id
			where ck.ck_name=#{ckName}
			group by pd.pd_id

    </select>
</mapper>
